import plotly.express as px
import pandas as pd

def plot_cluster_radar(cluster_means_norm, group_name):
    # Reshape data for px.line_polar
    data = []
    categories = list(cluster_means_norm.columns)
    
    for cluster_id in cluster_means_norm.index:
        for category in categories:
            data.append({
                'cluster': f'Cluster {cluster_id}',
                'category': category,
                'value': cluster_means_norm.loc[cluster_id, category]
            })
    
    df = pd.DataFrame(data)
    
    fig = px.line_polar(
        df, 
        r='value', 
        theta='category',
        color='cluster',
        line_close=True,
        range_r=[0, 1],
        title=f"Cluster Behavior: {group_name}"
    )
    
    fig.update_traces(fill='toself')
    fig.show()
